# 📋 프로젝트 한계점 분석 요약

> **기준**: 확장성/아키텍처 관점의 핵심 한계점 중심 정리

---

## 🚨 확장성 핵심 한계점 (Top 5)

### 1. 단일 스레드 동기식 아키텍처
| 현재 | 문제 | 영향 |
|------|------|------|
| `requests.get()` + `time.sleep()` | 25개 구 순차 수집 **125분** 소요 | 전국 확장 시 비현실적 |
| Django runserver (단일 프로세스) | 동시 수집 요청 블로킹 | 다중 사용자 불가 |
| `run_all.py` 파이프라인 | 중간 실패 시 전체 중단, 재시작 불가 | 운영 안정성 저하 |

**필요**: asyncio + Celery 비동기 태스크 큐

---

### 2. 메모리 기반 상태 관리
```python
global collection_status  # 서버 재시작 시 유실
```
- 멀티 워커 환경에서 상태 공유 불가
- 수집 중 서버 재시작 시 복구 불가

**필요**: Redis 기반 상태 저장

---

### 3. 외부 API 강결합
| API | 문제 |
|-----|------|
| 다이소 비공식 API | 리버스 엔지니어링 → 언제든 차단 가능 |
| 카카오맵 API | 에러 시 즉시 중단 (재시도 없음) |

**필요**: 캐시 레이어 + 재시도 로직 + 대체 소스 확보

---

### 4. 쿼리 확장성 미고려
```python
StoreClosureResult.objects.all()  # 전체 로드
gu = CharField(max_length=20)     # 인덱스 없음
```
- 25개 구(10,000+ 건) 일괄 로드 시 성능 저하
- 구별 쿼리 Full Scan

**필요**: DB 인덱스 + 페이지네이션 + 클러스터링

---

### 5. 비즈니스 로직 분리 부재 (Fat View)
```
views.py: 728 라인, 22개 함수
```
- 수집/검증/매칭 로직이 View에 혼재
- 테스트 격리 어려움, 재사용 불가

**필요**: Service Layer 패턴 분리

---

## 📊 우선순위별 요약

| 우선순위 | 항목 | 핵심 요약 |
|----------|------|----------|
| 🔴 Critical | 보안 | SECRET_KEY, DEBUG=True, DB 비밀번호 하드코딩 |
| 🔴 Critical | 데이터 정합성 | public_data.csv 영등포구 고정, 좌표 11m 오차 |
| 🟠 High | 확장성 | 동기 파이프라인, 메모리 상태, 단일 프로세스 |
| 🟠 High | API 의존성 | 비공식 API, 재시도 없음 |
| 🟠 High | 테스트 | 외부 API 모킹 부재, E2E 테스트 없음 |
| 🟡 Medium | 코드 품질 | Fat View, 모델 네이밍 혼란, 매직 넘버 |
| 🟡 Medium | 모니터링 | 로깅/메트릭 없음, 모니터 인증 없음 |
| 🟢 Low | DX | 문서화, 타입힌트, 린터 미적용 |

---

## 🎯 확장 시 우선 필요 작업

1. **Celery + Redis 도입** → 비동기 수집, 상태 관리
2. **Service Layer 분리** → 테스트 가능한 구조
3. **DB 인덱스/최적화** → 다중 구 쿼리 성능
4. **에러 복구 로직** → 재시도, 체크포인트, 부분 재실행

---

## 💡 핵심 결론

> **MVP 완성도**: 학습/포트폴리오로 우수  
> **프로덕션 격차**: 비동기 처리, 상태 관리, 에러 복구 필수

현재 구조로는 **1개 구 수집은 가능**하지만, **25개 구 이상 확장 시 구조적 한계**에 직면함.
