#  í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ê°€ì´ë“œ (Docker ê¸°ë°˜)

## ê°œìš”

ì´ ë¬¸ì„œëŠ” **Unit Test**ì™€ **Core Test**ì˜ ìƒì„¸ ì„¤ëª… ë° ì‹¤í–‰ ê°€ì´ë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤.

---

## í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ

```
                  /\
                 /  \
                / E2E \           â† test_core.py (ëŠë¦¬ì§€ë§Œ ì‹ ë¢°ë„ ë†’ìŒ)
               /______\
              /        \
             /Integration\        â† test_core.pyì˜ ì¼ë¶€
            /____________\
           /              \
          /   Unit Tests   \      â† test_unit.py (ë¹ ë¥´ê³  ë§ìŒ)
         /__________________\
```

| íŒŒì¼ | í…ŒìŠ¤íŠ¸ ìœ í˜• | íŠ¹ì§• |
|------|------------|------|
| `test_unit.py` | ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Unit Test) | ë¹ ë¦„, ë…ë¦½ì , DB Mock í¬í•¨ |
| `test_core.py` | ì½”ì–´ / í†µí•© í…ŒìŠ¤íŠ¸ | ëŠë¦¼, **ì„œìš¸ 'êµ¬'ë³„ ê²½ê³„ì„  & ìµœì  ë°˜ê²½ í…ŒìŠ¤íŠ¸** , ì™¸ë¶€ API í˜¸ì¶œ, ì „ì²´ íë¦„ ê²€ì¦ |

---

## ğŸ“ í…ŒìŠ¤íŠ¸ íŒŒì¼ ìœ„ì¹˜

| íŒŒì¼ | ê²½ë¡œ | í…ŒìŠ¤íŠ¸ ìˆ˜ |
|------|------|----------|
| **Unit Test** | `stores/test_unit.py` | 18ê°œ |
| **Core Test** | `stores/test_core.py` | 12ê°œ (**ì„œìš¸ 'êµ¬'ë³„ ê²½ê³„ì„  & ìµœì  ë°˜ê²½ í…ŒìŠ¤íŠ¸** 3 + E2E 5 + Docker 4) |

---

##  ì‹¤í–‰ ë°©ë²• (Docker)

### 1. ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
# Unit Test + Core Test ì „ì²´ ì‹¤í–‰
docker compose exec web python manage.py test stores -v 2
```

docker compose exec web python manage.py test stores.test_unit -v 2
```

### 3. Core Testë§Œ ì‹¤í–‰
```bash
docker compose exec web python manage.py test stores.test_core -v 2
```bash
# ì„œìš¸ 'êµ¬'ë³„ ê²½ê³„ì„  & ìµœì  ë°˜ê²½ í…ŒìŠ¤íŠ¸ë§Œ
docker compose exec web python manage.py test stores.test_core.ScalabilityTests -v 2

# E2E í†µí•© í…ŒìŠ¤íŠ¸ë§Œ
docker compose exec web python manage.py test stores.test_core.EndToEndIntegrationTests -v 2

# Docker ì¬í˜„ì„± í…ŒìŠ¤íŠ¸ë§Œ
docker compose exec web python manage.py test stores.test_core.DockerReproducibilityTests -v 2
```

---

## ğŸ“Š Unit Test ìƒì„¸ (test_unit.py)

### í…ŒìŠ¤íŠ¸ ê°œìš”

| í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ | í…ŒìŠ¤íŠ¸ ìœ í˜• | ì„¤ëª… | ê²°ê³¼ í™•ì¸ |
|--------------|------------|------|----------|
| `ModelIntegrityTests` | ëª¨ë¸ í…ŒìŠ¤íŠ¸ | ëª¨ë¸ CRUD ê¸°ë³¸ ë™ì‘ í…ŒìŠ¤íŠ¸ | ê° ëª¨ë¸(í¸ì˜ì , ë‹¤ì´ì†Œ, ì¸í—ˆê°€)ì´ ì •ìƒ ìƒì„±ë˜ëŠ”ì§€ í™•ì¸ |
| `DuplicatePreventionTests` | ì œì•½ì¡°ê±´ í…ŒìŠ¤íŠ¸ | ë°ì´í„°ë² ì´ìŠ¤ unique ì œì•½ì¡°ê±´ í…ŒìŠ¤íŠ¸ | ì¤‘ë³µ place_id ì €ì¥ ì‹œ `IntegrityError` ë°œìƒ ì—¬ë¶€ |
| `CoordinateValidityTests` | ë°ì´í„° ìœ íš¨ì„± í…ŒìŠ¤íŠ¸ | ì¢Œí‘œ ë°ì´í„° ë²”ìœ„ ê²€ì¦ | ì¢Œí‘œê°€ ì„œìš¸ ë²”ìœ„(ìœ„ë„ 37.4~37.7, ê²½ë„ 126.7~127.2) ë‚´ì¸ì§€ í™•ì¸ |
| `StoreClosureTests` | ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í…ŒìŠ¤íŠ¸ | íì—… íŒë³„ ë¡œì§ í…ŒìŠ¤íŠ¸ | íì—…ë¥  ê³„ì‚°(ì •ìƒ 8, íì—… 2 â†’ 20%) ì •í™•ì„± ê²€ì¦ |
| `APIViewTests` | í†µí•© API í…ŒìŠ¤íŠ¸ | API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸ | HTTP 200 ì‘ë‹µ, JSON êµ¬ì¡°, ì—ëŸ¬ í•¸ë“¤ë§ í™•ì¸ |
| `DataQualityTests` | ë°ì´í„° í’ˆì§ˆ í…ŒìŠ¤íŠ¸ | ë°ì´í„° í’ˆì§ˆ ê²€ì¦ í…ŒìŠ¤íŠ¸ | ì¤‘ë³µë¥  0%, í•„ìˆ˜ í•„ë“œ ì¡´ì¬, ì£¼ì†Œì— 'ì„œìš¸' í¬í•¨ í™•ì¸ |
| `PerformanceBenchmarkTests` | ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ | ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ í…ŒìŠ¤íŠ¸ | 1000ê°œ ë°ì´í„° ìƒì„± < 1ì´ˆ, ê³µê°„ ì¿¼ë¦¬ < 0.1ì´ˆ |
| `ExceptionHandlingTests` | ì˜ˆì™¸ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸ | ì—ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ | ì¤‘ë³µ ì‹¤í–‰ ì‹œ "ì´ë¯¸ ìˆ˜ì§‘ì´ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤" ì—ëŸ¬ ë°˜í™˜ |

### Unit Test í•­ëª© ìƒì„¸

| # | í…ŒìŠ¤íŠ¸ ë©”ì„œë“œ | ê²€ì¦ ë‚´ìš© | í†µê³¼ ì¡°ê±´ |
|---|-------------|----------|----------|
| 1 | `test_convenience_store_creation` | í¸ì˜ì  ëª¨ë¸ ìƒì„± | name, place_id ì¼ì¹˜ |
| 2 | `test_daiso_creation` | ë‹¤ì´ì†Œ ëª¨ë¸ ìƒì„± | name ì¼ì¹˜ |
| 3 | `test_restaurant_license_creation` | íœ´ê²ŒìŒì‹ì  ì¸í—ˆê°€ ìƒì„± | mgtno ì¼ì¹˜ |
| 4 | `test_tobacco_license_creation` | ë‹´ë°°ì†Œë§¤ì—… ì¸í—ˆê°€ ìƒì„± | mgtno ì¼ì¹˜ |
| 5 | `test_convenience_duplicate_place_id_rejected` | ì¤‘ë³µ place_id ì°¨ë‹¨ | IntegrityError ë°œìƒ |
| 6 | `test_daiso_duplicate_id_rejected` | ì¤‘ë³µ daiso_id ì°¨ë‹¨ | IntegrityError ë°œìƒ |
| 7 | `test_restaurant_license_duplicate_mgtno_rejected` | ì¤‘ë³µ mgtno ì°¨ë‹¨ | IntegrityError ë°œìƒ |
| 8 | `test_coordinate_within_seoul_range` | ì¢Œí‘œ ì„œìš¸ ë²”ìœ„ ê²€ì¦ | 37.4 â‰¤ lat â‰¤ 37.7, 126.7 â‰¤ lng â‰¤ 127.2 |
| 9 | `test_all_existing_stores_have_valid_coordinates` | ì „ì²´ ì¢Œí‘œ ìœ íš¨ì„± | ë²”ìœ„ ë°– ì¢Œí‘œ 0ê°œ |
| 10 | `test_location_not_null` | NULL ì¢Œí‘œ ê²€ì‚¬ | NULL ì¢Œí‘œ 0ê°œ |
| 11 | `test_closure_result_creation` | íì—… ê²°ê³¼ ìƒì„± | ìƒíƒœê°’(ì •ìƒ/íì—…) ì¼ì¹˜ |
| 12 | `test_closure_status_choices` | ìƒíƒœê°’ ì„ íƒì§€ | ì •ìƒ/íì—…ë§Œ í—ˆìš© |
| 13 | `test_closure_statistics` | íì—…ë¥  í†µê³„ | 80% ì •ìƒ, 20% íì—… ì •í™• ê³„ì‚° |
| 14 | `test_collector_view_accessible` | ìˆ˜ì§‘ UI ì ‘ê·¼ | HTTP 200 |
| 15 | `test_start_collection_without_api_keys` | API í‚¤ ëˆ„ë½ ì²˜ë¦¬ | success: false, error í¬í•¨ |
| 16 | `test_check_status_endpoint` | ìƒíƒœ í™•ì¸ API | running, progress, completed í¬í•¨ |
| 17 | `test_bulk_creation_performance` | ëŒ€ëŸ‰ ìƒì„± ì„±ëŠ¥ | 1000ê°œ < 1ì´ˆ |
| 18 | `test_duplicate_execution_prevented` | ì¤‘ë³µ ì‹¤í–‰ ì°¨ë‹¨ | "ì´ë¯¸ ìˆ˜ì§‘ì´ ì§„í–‰ ì¤‘" ì—ëŸ¬ |

---

## ğŸ“Š Core Test ìƒì„¸ (test_core.py)

### í…ŒìŠ¤íŠ¸ ê°œìš”

| í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ | í…ŒìŠ¤íŠ¸ ìœ í˜• | ì„¤ëª… | ê²°ê³¼ í™•ì¸ |
|--------------|------------|------|----------|
| `ScalabilityTests` | ì„œìš¸ 'êµ¬'ë³„ ê²½ê³„ì„  & ìµœì  ë°˜ê²½ í…ŒìŠ¤íŠ¸ | ì´ 25ê°œ êµ¬ ìµœì  ë°˜ê²½ ê²€ì¦ | 25ê°œ êµ¬ ì½”ë“œ ë§¤í•‘, 100% ì»¤ë²„ë¦¬ì§€ ìµœì†Œ ë°˜ê²½, API ë¹„ìš© ë¶„ì„ |
| `EndToEndIntegrationTests` | E2E í†µí•© í…ŒìŠ¤íŠ¸ | ì „ì²´ íŒŒì´í”„ë¼ì¸ ì‹œë®¬ë ˆì´ì…˜ | 5ë‹¨ê³„ íŒŒì´í”„ë¼ì¸ ìˆœì„œ, ë°ì´í„° ì¼ê´€ì„± ê²€ì¦ |
| `DockerReproducibilityTests` | í™˜ê²½ í…ŒìŠ¤íŠ¸ | Docker í™˜ê²½ ì¬í˜„ì„± ê²€ì¦ | í™˜ê²½ë³€ìˆ˜, ì˜ì¡´ì„±, DB ì—°ê²°, ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒíƒœ |

### 1ï¸âƒ£ ì„œìš¸ 'êµ¬'ë³„ ê²½ê³„ì„  & ìµœì  ë°˜ê²½ í…ŒìŠ¤íŠ¸  (3ê°œ)

| # | í…ŒìŠ¤íŠ¸ | ê²€ì¦ ë‚´ìš© | í†µê³¼ ì¡°ê±´ |
|---|--------|----------|----------|
| 1 | `test_1_all_25_gu_codes_exist` | 25ê°œ êµ¬ ì½”ë“œ ë§¤í•‘ í™•ì¸ | 25ê°œ êµ¬ ì „ì²´ ì¡´ì¬ |
| 2 | `test_2_boundary_address_validation` | êµ¬ ê²½ê³„ ì •í™•ì„± + ìµœì†Œ ë°˜ê²½ ì‚°ì¶œ | í‰ê·  ì»¤ë²„ë¦¬ì§€ â‰¥ 70% |
| 3 | `test_3_api_call_estimation` | API í˜¸ì¶œ/ë¹„ìš© ë¶„ì„ | ë¬´ë£Œ ë²”ìœ„ ë‚´ (ì¹´ì¹´ì˜¤ < 100,000, ì„œìš¸ì‹œ < 10,000) |

### 2ï¸âƒ£ E2E í†µí•© í…ŒìŠ¤íŠ¸ (5ê°œ)

| # | í…ŒìŠ¤íŠ¸ | ê²€ì¦ ë‚´ìš© | í†µê³¼ ì¡°ê±´ |
|---|--------|----------|----------|
| 1 | `test_1_pipeline_stage_order` | íŒŒì´í”„ë¼ì¸ 5ë‹¨ê³„ ìˆœì„œ | 5ë‹¨ê³„ í™•ì¸ |
| 2 | `test_2_simulated_daiso_collection` | ë‹¤ì´ì†Œ ìˆ˜ì§‘ ì‹œë®¬ë ˆì´ì…˜ | 16ê°œ ìƒì„± |
| 3 | `test_3_simulated_convenience_collection` | í¸ì˜ì  ìˆ˜ì§‘ ì‹œë®¬ë ˆì´ì…˜ | 100ê°œ ìƒì„± |
| 4 | `test_4_simulated_openapi_collection` | OpenAPI ìˆ˜ì§‘ ì‹œë®¬ë ˆì´ì…˜ | íœ´ê²ŒìŒì‹ì  50ê°œ, ë‹´ë°°ì†Œë§¤ì—… 30ê°œ |
| 5 | `test_5_data_consistency_check` | ë°ì´í„° ì¼ê´€ì„± ê²€ì¦ | ëª¨ë“  í¸ì˜ì ì— íì—…ê²°ê³¼ ì¡´ì¬ |

### 3ï¸âƒ£ Docker ì¬í˜„ì„± í…ŒìŠ¤íŠ¸ (4ê°œ)

| # | í…ŒìŠ¤íŠ¸ | ê²€ì¦ ë‚´ìš© | í†µê³¼ ì¡°ê±´ |
|---|--------|----------|----------|
| 1 | `test_1_required_environment_variables` | í™˜ê²½ ë³€ìˆ˜ í™•ì¸ | DATABASE_URL ë“± í•„ìˆ˜ ë³€ìˆ˜ ì¡´ì¬ |
| 2 | `test_2_required_dependencies` | í•„ìˆ˜ íŒ¨í‚¤ì§€ í™•ì¸ | Django, requests ë“± import ì„±ê³µ |
| 3 | `test_3_database_connection` | DB + PostGIS ì—°ê²° | ì—°ê²° ì„±ê³µ, PostGIS í™œì„±í™” |
| 4 | `test_4_model_migrations` | ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒíƒœ | ëª¨ë“  ëª¨ë¸ í…Œì´ë¸” ì¡´ì¬ |

---

## ğŸ’° API ë¹„ìš© ë¶„ì„

| API | 25ê°œ êµ¬ ì˜ˆìƒ | ì¼ì¼ í•œë„ | ì‚¬ìš©ë¥  |
|-----|-------------|----------|--------|
| **ì¹´ì¹´ì˜¤ REST** | ~5,000íšŒ | 100,000ê±´ | **5%** |
| **ì„œìš¸ì‹œ OpenAPI** | 50íšŒ | 10,000íšŒ | **0.5%** |

> âœ… **ì „ì²´ 25ê°œ êµ¬ ìˆ˜ì§‘ë„ ë¬´ë£Œ ë²”ìœ„ ë‚´!**

---

## ğŸ“‹ ì˜ˆìƒ ì¶œë ¥

### Unit Test ê²°ê³¼
```
Ran 18 tests in 2.XXXs
OK
```

### Core Test ê²°ê³¼
```
======================================================================
ğŸ“Š ì½”ì–´ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìš”ì•½
======================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì¹´í…Œê³ ë¦¬                       â”‚  í…ŒìŠ¤íŠ¸ ìˆ˜  â”‚         ê²°ê³¼        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì„œìš¸'êµ¬'ë³„ ê²½ê³„ì„ &ìµœì ë°˜ê²½ í…ŒìŠ¤íŠ¸â”‚    3ê°œâ”‚     âœ… ëª¨ë‘ í†µê³¼   â”‚
â”‚ E2E í†µí•© í…ŒìŠ¤íŠ¸                â”‚     5ê°œ    â”‚      âœ… ëª¨ë‘ í†µê³¼    â”‚
â”‚ Docker ì¬í˜„ì„± í…ŒìŠ¤íŠ¸            â”‚     4ê°œ    â”‚      âœ… ëª¨ë‘ í†µê³¼    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ˆ ì´ í…ŒìŠ¤íŠ¸: 12ê°œ | ì „ì²´ ê²°ê³¼: âœ… ëª¨ë‘ í†µê³¼                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ran 13 tests in X.XXXs
OK
```

---

## âœ… ì„±ê³µ ê¸°ì¤€

### Unit Test
```
Ran 18 tests in X.XXXs
OK
```

### Core Test
```
Ran 13 tests in X.XXXs
OK
```

---

**ì‘ì„±ì¼**: 2026-01-22  
**ë²„ì „**: v2.1
