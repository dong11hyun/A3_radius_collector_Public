## μλ“±ν¬κµ¬ ν™•μ¥ ν”„λ΅μ νΈ - 2λ‹¨κ³„ μƒμ„Έμ„¤λ…

> π― **λ©ν‘**: κ³µκ³µλ°μ΄ν„°ν¬νƒ λ°μ΄ν„° λ΅λ“ λ° νμ—… λ§¤μ¥ νƒμ§€
> 
> π“ **κ΄€λ ¨ νμΌ**: 
> - `load_public_data.py` (κ³µκ³µλ°μ΄ν„° CSV λ΅λ“)
> - `compare_public_data.py` (νμ—… λ§¤μ¥ νƒμ§€)
>
> π³ **μ‹¤ν–‰ ν™κ²½**: Docker (web + db μ»¨ν…μ΄λ„)

---

### 2-1. κ³µκ³µλ°μ΄ν„°ν¬νƒμ—μ„ λ°μ΄ν„° λ‹¤μ΄λ΅λ“ (μλ™ μ‘μ—…)

```
π“¥ λ‹¤μ΄λ΅λ“ μμ„:
1. https://www.data.go.kr/ μ ‘μ†
2. κ²€μƒ‰: "μ†μƒκ³µμΈμ‹μ¥μ§„ν¥κ³µλ‹¨_μƒκ°€(μƒκ¶)μ •λ³΄"
3. μ„μΈνΉλ³„μ‹ > μλ“±ν¬κµ¬ λ°μ΄ν„° λ‹¤μ΄λ΅λ“ (CSV)
4. ν”„λ΅μ νΈ ν΄λ”μ— μ €μ¥ (μ: public_data.csv)
```

**κ³µκ³µλ°μ΄ν„° κµ¬μ΅° μμ‹:**
```csv
μƒκ°€μ—…μ†λ²νΈ,μƒνΈλ…,μ§€λ²μ£Όμ†,λ„λ΅λ…μ£Όμ†,μƒκ¶μ—…μΆ…μ¤‘λ¶„λ¥λ…,μμ—…μƒνƒ
101234567,CU μλ“±ν¬μ—­μ ,μ„μΈνΉλ³„μ‹ μλ“±ν¬κµ¬...,μ„μΈνΉλ³„μ‹ μλ“±ν¬κµ¬...,νΈμμ ,μμ—…
101234568,GS25 λ‹Ήμ‚°μ ,μ„μΈνΉλ³„μ‹ μλ“±ν¬κµ¬...,μ„μΈνΉλ³„μ‹ μλ“±ν¬κµ¬...,νΈμμ ,νμ—…
```

> β οΈ **μ£Όμ**: CSV νμΌμ€ ν”„λ΅μ νΈ ν΄λ”μ— μ €μ¥ν•΄μ•Ό Docker μ»¨ν…μ΄λ„μ—μ„ μ ‘κ·Ό κ°€λ¥ν•©λ‹λ‹¤.
> (docker-compose.ymlμ—μ„ `.:/app` λ³Όλ¥¨ λ§μ΄νΈλ¨)

---

### 2-2. κ³µκ³µλ°μ΄ν„° CSV λ΅λ“

```
λ΅λ“ νλ¦„:
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”        β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  κ³µκ³µλ°μ΄ν„° CSV     β”‚   β†’   β”‚    λ¶„μ„ λ° ν•„ν„°λ§     β”‚
β”‚  (μλ“±ν¬κµ¬ μƒκ°€)    β”‚        β”‚  - νΈμμ λ§           β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”        β”‚  - μλ“±ν¬κµ¬λ§         β”‚
                              β”‚  - νμ—… μƒνƒ ν™•μΈ     β”‚
                              β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

**Dockerμ—μ„ μ‹¤ν–‰:**
```powershell
# CSV νμΌ λ¶„μ„
docker compose exec web python manage.py load_public_data --csv=public_data.csv

# νΉμ • κµ¬ ν•„ν„°λ§
docker compose exec web python manage.py load_public_data --csv=public_data.csv --gu=μλ“±ν¬κµ¬
```

**μμƒ κ²°κ³Ό:**
```
CSV νμΌ λ΅λ“ μ¤‘: public_data.csv
ν•„ν„°λ§ λ€μƒ: μλ“±ν¬κµ¬
κ°μ§€λ μ»¬λΌ: 25κ°
μΈμ½”λ”©: cp949

π“ κ³µκ³µλ°μ΄ν„° λ¶„μ„ μ™„λ£!
  - νΈμμ  λ°μ΄ν„°: 234κ°
  - νμ—… μƒνƒ: 47κ°
  - μ¤ν‚µ: 1520κ°

β οΈ μλ“±ν¬κµ¬ νμ—… νΈμμ  47κ° λ°κ²¬!
compare_public_data μ»¤λ§¨λ“λ΅ μΉ΄μΉ΄μ¤λ§µ λ°μ΄ν„°μ™€ λΉ„κµν•΄λ³΄μ„Έμ”.
```

---

### 2-3. κ³µκ³µλ°μ΄ν„°μ™€ μΉ΄μΉ΄μ¤λ§µ λ°μ΄ν„° λΉ„κµ

```
λΉ„κµ λ΅μ§:
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”         β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚   κ³µκ³µλ°μ΄ν„° (νμ—…)   β”‚         β”‚   μΉ΄μΉ΄μ¤λ§µ (μμ—…)     β”‚
β”‚                      β”‚         β”‚   (NearbyStore)      β”‚
β”‚  GS25 λ‹Ήμ‚°μ          β”‚         β”‚  GS25 λ‹Ήμ‚°μ          β”‚
β”‚  μƒνƒ: νμ—…          β”‚   β†’     β”‚  μƒνƒ: ν‘μ‹λ¨        β”‚
β”‚  μ£Όμ†: μλ“±ν¬κµ¬...    β”‚         β”‚  μ£Όμ†: μλ“±ν¬κµ¬...    β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”         β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
           β†“
    μ£Όμ† μ μ‚¬λ„: 85%  +  μƒνΈλ… μ μ‚¬λ„: 90%
           β†“
    κ°€μ¤‘ ν‰κ·  = 0.85 * 0.7 + 0.9 * 0.3 = 0.865
           β†“
    μ„κ³„κ°’ 0.6 μ΄μƒ! β†’ λ§¤μΉ­ λ°κ²¬!
           β†“
    π” "μ΄ λ§¤μ¥μ€ νμ—…μΈλ° μΉ΄μΉ΄μ¤λ§µμ— ν‘μ‹λμ–΄ μμ–΄μ”!"
```

**Dockerμ—μ„ μ‹¤ν–‰:**
```powershell
# νμ—… λ§¤μ¥ νƒμ§€ (dry-run: κ²°κ³Όλ§ μ¶λ ¥)
docker compose exec web python manage.py compare_public_data --csv=public_data.csv --dry-run

# λ§¤μΉ­ μ„κ³„κ°’ μ΅°μ • (κΈ°λ³Έκ°’: 0.6)
docker compose exec web python manage.py compare_public_data --csv=public_data.csv --threshold=0.7 --dry-run

# μƒμ„Έ μ •λ³΄ μ¶λ ¥
docker compose exec web python manage.py compare_public_data --csv=public_data.csv --verbose --dry-run
```

**μμƒ κ²°κ³Ό:**
```
λ§¤μΉ­ μ„κ³„κ°’: 0.6
κ³µκ³µλ°μ΄ν„° νμ—… νΈμμ : 47κ°
μΉ΄μΉ΄μ¤λ§µ νΈμμ : 156κ°

π” λ§¤μΉ­ λ°κ²¬ (μ μ‚¬λ„: 0.87)
  μΉ΄μΉ΄μ¤: GS25 λ‹Ήμ‚°μ—­2νΈμ  | μ„μΈ μλ“±ν¬κµ¬ λ‹Ήμ‚°λ™6κ°€ 121-3
  κ³µκ³µDB: GS25 λ‹Ήμ‚°μ—­μ  | μ„μΈνΉλ³„μ‹ μλ“±ν¬κµ¬ λ‹Ήμ‚°λ™6κ°€ 121-3 | νμ—…

π” λ§¤μΉ­ λ°κ²¬ (μ μ‚¬λ„: 0.82)
  μΉ΄μΉ΄μ¤: CU μλ“±ν¬λ³Έλ™μ  | μ„μΈ μλ“±ν¬κµ¬ μλ“±ν¬λ™ 123-4
  κ³µκ³µDB: CU μλ“±ν¬μ  | μ„μΈνΉλ³„μ‹ μλ“±ν¬κµ¬ μλ“±ν¬λ™ 123-4 | νμ—…

--- λΉ„κµ κ²°κ³Ό ---
μ΄ 12κ°μ νμ—… μμ‹¬ λ§¤μ¥ λ°κ²¬

β οΈ μ„ λ§¤μ¥λ“¤μ€ κ³µκ³µλ°μ΄ν„°μ—μ„ 'νμ—…'μ΄μ§€λ§ μΉ΄μΉ΄μ¤λ§µμ— ν‘μ‹λμ–΄ μμµλ‹λ‹¤.
μ λ³΄ν•κ±°λ‚ ν™•μΈμ΄ ν•„μ”ν•©λ‹λ‹¤.
```

---

### 2-4. μ μ‚¬λ„ λ§¤μΉ­ μ•κ³ λ¦¬μ¦ μ„¤λ…

```python
# compare_public_data.pyμ ν•µμ‹¬ λ΅μ§

def similarity(a, b):
    """λ‘ λ¬Έμμ—΄μ μ μ‚¬λ„ κ³„μ‚° (0.0 ~ 1.0)"""
    from difflib import SequenceMatcher
    return SequenceMatcher(None, a.lower(), b.lower()).ratio()

# μ£Όμ† μ •κ·ν™”
"μ„μΈνΉλ³„μ‹ μλ“±ν¬κµ¬ λ‹Ήμ‚°λ™6κ°€ 121-3"
    β†“ κ³µλ°±/νΉμλ¬Έμ μ κ±°
"μ„μΈνΉλ³„μ‹μλ“±ν¬κµ¬λ‹Ήμ‚°λ™6κ°€1213"

# μ μ‚¬λ„ κ³„μ‚°
μ£Όμ†_μ μ = max(
    similarity(κ³µκ³µλ°μ΄ν„°_μ§€λ²μ£Όμ†, μΉ΄μΉ΄μ¤_μ£Όμ†),
    similarity(κ³µκ³µλ°μ΄ν„°_λ„λ΅λ…, μΉ΄μΉ΄μ¤_μ£Όμ†)
) = 0.85

μƒνΈλ…_μ μ = similarity("GS25 λ‹Ήμ‚°μ—­μ ", "GS25 λ‹Ήμ‚°μ—­2νΈμ ") = 0.9

# κ°€μ¤‘ ν‰κ·  (μ£Όμ† 70%, μƒνΈλ… 30%)
μµμΆ…_μ μ = 0.85 * 0.7 + 0.9 * 0.3 = 0.865

# μ„κ³„κ°’ λΉ„κµ
if μµμΆ…_μ μ >= 0.6:
    λ§¤μΉ­_λ°κ²¬!
```

| μ„κ³„κ°’ | μ •ν™•λ„ | νƒμ§€μ¨ | μ©λ„ |
|--------|--------|--------|------|
| 0.8 μ΄μƒ | λ†’μ | λ‚®μ | μ •ν™•ν• λ§¤μΉ­λ§ μ›ν•  λ• |
| 0.6 (κΈ°λ³Έ) | μ¤‘κ°„ | μ¤‘κ°„ | κ¶μ¥ |
| 0.5 μ΄ν• | λ‚®μ | λ†’μ | μµλ€ν• λ§μ€ λ§¤μΉ­ |

---

### 2-5. PostgreSQLμ—μ„ μ§μ ‘ ν™•μΈ

```powershell
# PostgreSQL μ ‘μ†
docker compose exec db psql -U postgres -d radius_collector

# νΈμμ  μ ν™•μΈ
SELECT COUNT(*) FROM yeongdeungpo_convenience;

# νΈμμ  μƒν” λ°μ΄ν„°
SELECT name, address, base_daiso FROM yeongdeungpo_convenience LIMIT 5;

# μΆ…λ£
\q
```

---

### 2-6. 2λ‹¨κ³„ μ™„λ£ ν™•μΈ

```powershell
# 1. νμ—… μμ‹¬ λ§¤μ¥μ΄ λ°κ²¬λμ—λ”μ§€ ν™•μΈ
docker compose exec web python manage.py compare_public_data --csv=public_data.csv --dry-run

# 2. κ°μ ν™•μΈ
# "μ΄ Nκ°μ νμ—… μμ‹¬ λ§¤μ¥ λ°κ²¬" λ©”μ‹μ§€ ν™•μΈ
```

---

### 2λ‹¨κ³„ μ”μ•½

| μ‘μ—… | Docker λ…λ Ήμ–΄ | κ²°κ³Ό |
|------|--------------|------|
| κ³µκ³µλ°μ΄ν„° λ‹¤μ΄λ΅λ“ | (μλ™) data.go.kr | CSV νμΌ |
| CSV λ¶„μ„ | `docker compose exec web python manage.py load_public_data --csv=νμΌ` | νμ—… νΈμμ  μ ν™•μΈ |
| νμ—… λ§¤μ¥ νƒμ§€ | `docker compose exec web python manage.py compare_public_data --csv=νμΌ` | λ§¤μΉ­ κ²°κ³Ό |

```
2λ‹¨κ³„ μ™„λ£ ν›„ μƒνƒ:
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ YeongdeungpoConvenience   β”‚     β”‚  κ³µκ³µλ°μ΄ν„° CSV     β”‚
β”‚   (PostgreSQL)            β”‚     β”‚  (νμ—… λ§¤μ¥ ν¬ν•¨)  β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
          β”‚                                 β”‚
          β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                     β†“
           β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
           β”‚  λΉ„κµ κ²°κ³Ό (μ½μ†”)    β”‚
           β”‚  - λ§¤μΉ­λ νμ—… λ§¤μ¥  β”‚
           β”‚  - μ μ‚¬λ„ μ μ       β”‚
           β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

---

> π“ **λ‹¤μ λ‹¨κ³„**: [3λ‹¨κ³„ - μ›Ή μ‹κ°ν™” λ° μ λ³΄ κΈ°λ¥](./μλ“±ν¬κµ¬ν™•μ¥(3λ‹¨κ³„)μƒμ„Έμ„¤λ….md)
